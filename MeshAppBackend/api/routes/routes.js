const express = require('express');
const sh = require('shelljs');
const {spawn} = require('child_process');

module.exports = function(app, express) {

	let router = express.Router();

	app.get('/api/test', function(req, res) {
		//let body = {"178.162.219.154": 14, "104.198.143.177": 5, "173.194.166.105": 118, "173.194.166.106": 1689, "224.0.0.22": 30, "216.58.194.193": 212, "216.58.194.196": 172, "172.217.5.106": 276, "216.58.194.194": 133, "216.58.194.195": 131, "23.197.97.4": 3, "52.216.165.107": 241, "104.197.3.80": 14, "172.217.6.74": 105, "216.58.194.202": 1049, "172.217.6.78": 247, "72.21.91.29": 109, "54.200.76.177": 55, "74.125.166.168": 452, "13.107.4.52": 19, "216.58.195.74": 76, "216.58.195.234": 107, "74.125.142.103": 2, "74.125.142.105": 3, "74.125.142.104": 3, "74.125.142.106": 3, "216.58.194.170": 36, "173.194.167.233": 2922, "172.27.0.155": 272, "74.125.31.188": 33, "216.58.194.174": 132, "172.217.6.45": 438, "172.27.0.68": 71, "63.245.208.212": 34, "8.8.4.4": 2, "54.192.146.136": 28, "74.125.103.42": 2554, "173.194.166.170": 452, "0.0.0.0": 18, "255.255.255.255": 21, "172.27.0.160": 253, "74.125.197.188": 15, "172.217.5.110": 79, "216.58.195.67": 78, "172.27.0.227": 22451, "34.214.252.85": 87, "172.217.5.118": 1595, "172.217.0.46": 603, "172.27.0.206": 95, "52.89.138.72": 51, "54.192.146.6": 72, "224.0.0.252": 2, "74.125.142.147": 3, "239.255.255.250": 137, "54.192.146.120": 640, "52.34.228.229": 141, "172.217.6.42": 72, "35.164.82.230": 47, "172.27.0.88": 10, "8.8.8.8": 2, "172.217.5.98": 142, "52.27.184.151": 59, "184.26.157.132": 300, "5.199.135.170": 1, "74.125.142.99": 3, "172.217.164.106": 171, "54.192.146.17": 406, "54.192.146.167": 55, "216.58.192.19": 55, "131.186.113.70": 18, "173.194.166.233": 1782, "151.101.41.140": 4, "172.27.0.32": 253, "224.0.0.251": 33, "216.58.195.238": 1548, "54.165.216.55": 115, "172.27.0.15": 2411, "52.10.13.247": 97, "172.27.0.12": 96, "71.92.69.98": 5, "172.217.6.38": 78};
		
		const pythonProcess = spawn('python', ['./PythonScripts/gettraffic2.py']); 

		pythonProcess.stdout.on('data', (data) => {
			// Do something with the data returned from python script
			console.log("data: " + data.toString()); 
			data = data.toString(); 
			res.status(200).send({
				data: "hello world"
			});
		});

		pythonProcess.stderr.on('data', (data) => {
        	console.log(data.toString()); 
   	 	});

		
	});


}